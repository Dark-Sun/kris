/**
 * Меню с плавной инверсией цвета
 *
 * @author Alexey Krupsky <benzus@mail.ru>
 */
jQuery.fn.inji_inversion_menu=function(e){var e=jQuery.extend({bg:"#2429a9",font:"#00000",activeclass:"active",cloneclass:"inji_inversion_menu_clone",navcursorclass:"inji_inversion_menu_navcursor",speed:300},e);return this.each(function(){function a(){clearTimeout(n),n=setTimeout(function(){i=s,o.stop(!0).animate({marginLeft:r.left,marginTop:r.top-t.height(),width:r.width},{duration:e.speed,step:function(){u.css({marginLeft:"-"+o.css("marginLeft"),marginTop:-(t.height()+parseFloat(o.css("marginTop")))})}})},100)}var t=jQuery(this);if(t.length<=0)return;var n=null,r={};t.wrap('<div style = "position:relative"></div>');if(t.find("."+e.activeclass).length>0){var i=t.find("."+e.activeclass);i.removeClass(e.activeclass),r.left=i.position().left,r.top=i.position().top,r.height=i.height(),r.width=i.width()+parseInt(i.css("paddingLeft"))+parseInt(i.css("paddingRight"))}else obj=t.find(":first-child"),r.left=obj.position().left,r.top=obj.position().top,r.height=obj.height(),r.width=0;var s=i;t.parent().append('<div class = "'+e.navcursorclass+'"></div>');var o=t.parent().find("."+e.navcursorclass);o.css({marginTop:-t.height()+r.top,width:r.width,height:r.height,marginLeft:r.left,overflow:"hidden",whiteSpace:"nowrap",position:"absolute"});var u=t.clone();u.css({marginLeft:-r.left,marginTop:-r.top,background:e.bg,width:t.width()}),u.find("a").css("color",e.font),u.addClass(e.cloneclass),u=u.appendTo(o),u.children().hover(function(){clearTimeout(n)},a),t.children().hover(function(){clearTimeout(n);if(jQuery(this)==i)return;i=this,o.stop().animate({marginLeft:jQuery(this).position().left,marginTop:jQuery(this).position().top-t.height(),width:jQuery(this).width()+parseInt(jQuery(this).css("paddingLeft"))+parseInt(jQuery(this).css("paddingRight"))},{duration:e.speed,step:function(){u.css({marginLeft:"-"+o.css("marginLeft"),marginTop:-(t.height()+parseFloat(o.css("marginTop")))})}})},a)})};